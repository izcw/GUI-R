!function(){"use strict";function t(t){return t+="==".substring(0,(4-t.length%4)%4),atob(t.replace(/-/g,"+").replace(/_/g,"/"))}let n=null;self.onmessage=async({data:e})=>{n&&clearInterval(n);const r=async()=>{const r=await async function(n){const e=n.split(".");if(3!==e.length)return null;try{const r="refresh"===(JSON.parse(t(e[1])).Type||"access")?"demo-refresh-secret":"demo-access-secret";return await async function(n,e){const r=n.split(".");if(3!==r.length)return null;try{const n=JSON.parse(t(r[1]));if(n.ExpTime&&n.ExpTime<Math.floor(Date.now()/1e3))return null;const a=await async function(t,n){const e=new TextEncoder,r=await crypto.subtle.importKey("raw",e.encode(n),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),a=await crypto.subtle.sign("HMAC",r,e.encode(t)),c=new Uint8Array(a);let s="";for(let l=0;l<c.byteLength;l++)s+=String.fromCharCode(c[l]);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(`${r[0]}.${r[1]}`,e);return a===r[2]?n:null}catch{return null}}(n,r)}catch(r){return null}}(e.token);(new Date).toLocaleTimeString(),r||(self.postMessage("expire"),n&&clearInterval(n))};await r(),n=setInterval(r,1e3)}}();
